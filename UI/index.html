<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Kamera-Steuerung</title>

    <!--VOR dem laden von tailwind wird der Darkmode abgefragt-->
    <script>
        const settings = JSON.parse(localStorage.getItem("electron-settings"));
        if (settings?.darkMode) {
            document.documentElement.classList.add("dark");
        }
    </script>

    <script src="./renderer.js" defer></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Dark Mode aktivieren -->
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>


    <script>
        //Settings Skript
        // Dark Mode Klasse schon beim initialen Laden setzen
        (async () => {
            const settings = JSON.parse(localStorage.getItem("electron-settings"));
            if (settings?.darkMode) {
                document.documentElement.classList.add("dark");
            }
        })();
    </script>

    <!-- Style from: https://codepen.io/ash_s_west/pen/GRZbvym -->
    <style>
        .dark .custom-button {
            background-color: black;
            color: white;
        }

        .dark .custom-button:hover {
            background-color: #14141f;
        }

        .custom-button{
            position: relative;
            background-color: white;
            border-radius: 4em;
            font-size: 10px;
            color: black;
            padding: 0.8em 1.8em;
            cursor:pointer;
            user-select:none;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            transition-duration: 0.4s;
            -webkit-transition-duration: 0.4s; /* Safari */
        }

        .custom-button:hover {
            transition-duration: 0.1s;
            background-color: #e4e4e4;
        }

        .custom-button:after {
            content: "";
            display: block;
            position: absolute;
            border-radius: 4em;
            left: 0;
            top:0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: all 0.5s;
            box-shadow: 0 0 10px 40px white;
        }

        .custom-button:active:after {
            box-shadow: 0 0 0 0 white;
            position: absolute;
            border-radius: 4em;
            left: 0;
            top:0;
            opacity: 1;
            transition: 0s;
        }

        .custom-button:active {
            top: 1px;
        }

    </style>


</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans">

<div class="flex items-center justify-between px-4 py-0">
    <img alt="Logo" src="./img/logo.svg" class="h-10 object-contain py-1">
    <button class="btn justify-self-end h-10" onclick="window.electronAPI.openSettings()">⚙️ Einstellungen</button>
</div>


<!-- Kamera Container, in den die UIs eingefügt werden, je nachdem wie viele es sein sollen -->
<div id="camera-container" class=""></div>


<!-- Alles ist das Template -->
<template id="camera-template">
    <div class="camera-ui relative space-y-0 bg-white dark:bg-gray-800 text-black dark:text-white rounded-xl pt-3 pl-3 pr-3 shadow text-[15px]">


        <div class="flex items-center gap-2 sticky top-3">
            <h2 class="camera-label hover:cursor-pointer bg-white dark:bg-gray-800 text-black dark:text-white text-xl font-semibold">Kamera</h2>
            <span class="status-lampe inline-flex h-4 w-4 rounded-full bg-red-500 opacity-80 gentle-ping sticky"></span>
        </div>


        <!--
        w-4 h-4 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.8)] glow
        absolute inline-flex h-4 w-4 rounded-full bg-yellow-400 opacity-75 animate-ping
        -->

        <!-- Bewegung -->
        <section>
            <h3 class="font-semibold">Bewegung</h3>
            <div class="grid grid-cols-3 gap-1 w-44 mx-auto text-lg">
                <button class="direction-button btn" data-direction="up_left">↖︎</button>
                <button class="direction-button btn" data-direction="up">↑</button>
                <button class="direction-button btn" data-direction="up_right">↗︎</button>
                <button class="direction-button btn" data-direction="left">←</button>
                <button class="direction-button btn" data-direction="stop">⏹</button>
                <button class="direction-button btn" data-direction="right">→</button>
                <button class="direction-button btn" data-direction="down_left">↙︎</button>
                <button class="direction-button btn" data-direction="down">↓</button>
                <button class="direction-button btn" data-direction="down_right">↘︎</button>
            </div>
        </section>

        <!-- Zoom (allein auf voller Breite) -->
        <section>
            <h3 class="font-semibold">Zoom</h3>
            <div class="flex items-center gap-3 justify-center">
                <button class="btn zoom-out px-3 py-1">-</button>
                <span class="zoom-level font-mono text-lg">0.0x</span>
                <button class="btn zoom-in px-3 py-1">+</button>
            </div>
            <input type="range" min="0" max="36" step="0.2" class="zoom-slider w-full mt-1">
        </section>

        <!-- Fokus & Belichtung nebeneinander -->
        <details open class="rounded-md overflow-hidden"
                 style="margin-top: 12px; margin-bottom: 8px;">
            <summary class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans cursor-pointer px-4 py-2 text-lg marker:text-blue-500 marker:text-xl"><span class="font-semibold mb-2 mx-10">Fokus</span><span class="font-semibold mb-2 mx-10">&</span><span class="font-semibold mb-2 mx-10">Belichtung</span></summary>
        <section class="grid grid-cols-2 gap-4 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans my-1.5 px-4 py-4 space-y-4">
            <div>
                <select class="focus-mode select mb-2 w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">Manual</option>
                    <option value="1" selected>Auto</option>
                </select>
                <span class="font-mono text-xs block mb-1">Focus Range:</span>
                <span class="value-focus-range font-mono block mb-1">N.A.</span>
                <input type="range" min="0" max="2409" step="1" class="focus-range w-full">
                <button class="btn focus-out px-3 py-1 px-5 mx-5 my-2.5 border border-black dark:border-white hover:border-red-700 dark:hover:border-red-700 rounded-md">-</button>
                <button class="btn focus-in px-3 py-1 px-5 mx-5 my-2.5 border border-black dark:border-white hover:border-green-500 dark:hover:border-green-500 rounded-md">+</button>

                <!-- Exposure Compensation rüber gerückt aus Platzmangel -->
                <span class="font-mono text-xs mt-7">Exposure Compensation: </span><span class="value-exposure-compensation font-mono text-s" data-raw-value="5">N.A.</span>
                <button class="btn decrease-exposure-compensation px-3 py-1 px-5 mx-5 my-2.5 border border-black dark:border-white hover:border-red-700 dark:hover:border-red-700 rounded-md">-</button>
                <button class="btn increase-exposure-compensation px-3 py-1 px-5 mx-5 my-2.5 border border-black dark:border-white hover:border-green-500 dark:hover:border-green-500 rounded-md">+</button>

            </div>

            <div>
                <span class="font-mono text-xs block mb-1"> Mode-Shutter-Gain-Gamma-Iris</span>
                <select class="exposure-mode select mb-2 w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">Full Auto</option>
                    <option value="3">Manuell</option>
                    <option value="1">Shutter Priority</option>
                    <option value="2">Iris Priority</option>
                </select>
                <select class="shutter select mb-2 w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">1/10000</option>
                    <option value="1">1/5000</option>
                    <option value="2">1/3000</option>
                    <option value="3">1/2500</option>
                    <option value="4">1/2000</option>
                    <option value="5">1/1500</option>
                    <option value="6">1/1000</option>
                    <option value="7">1/725</option>
                    <option value="8">1/500</option>
                    <option value="9">1/350</option>
                    <option value="10">1/250</option>
                    <option value="11">1/180</option>
                    <option value="12">1/120</option>
                    <option value="13">1/100</option>
                    <option value="14">1/90</option>
                    <option value="15">1/60</option>
                    <option value="16">1/30</option>
                    <option value="17">1/15</option>
                    <option value="18">1/8</option>
                    <option value="19">1/4</option>
                    <option value="20">1/2</option>
                    <option value="21">1/1</option>
                </select>
                <select class="gain select mb-2 w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">0dB</option>
                    <option value="1">3dB</option>
                    <option value="2">6dB</option>
                    <option value="3">9dB</option>
                    <option value="4">12dB</option>
                    <option value="5">15dB</option>
                    <option value="6">18dB</option>
                    <option value="7">21dB</option>
                    <option value="8">24dB</option>
                    <option value="9">27dB</option>
                    <option value="10">30dB</option>
                    <option value="11">33dB</option>
                    <option value="12">36dB</option>
                    <option value="13">39dB</option>
                    <option value="14">42dB</option>
                    <option value="15">45dB</option>
                </select>
                <select class="gamma select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
                <div class="mt-3 mb-2 ml-2">

                </div>

                <!-- Iris -->
                <select class="iris select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">F18</option>
                    <option value="1">F16</option>
                    <option value="2">F13</option>
                    <option value="3">F11</option>
                    <option value="4">F9</option>
                    <option value="5">F7.8</option>
                    <option value="6">F6.3</option>
                    <option value="7">F5.4</option>
                    <option value="8">F4.5</option>
                    <option value="9">F3.8</option>
                    <option value="10">F3.2</option>
                    <option value="11">F2.7</option>
                    <option value="12">F2.2</option>
                    <option value="13">F2.0</option>
                    <option value="14">F1.6</option>
                </select>
            </div>
        </section>
        </details>

        <!-- Presets -->
        <details open class="rounded-md overflow-hidden"
                 style="margin-top: 8px; margin-bottom: 10px;">
            <summary class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans cursor-pointer px-4 py-2 text-lg marker:text-blue-500 marker:text-xl"><span class="font-semibold mb-1.5">Presets</span></summary>
        <section class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans my-1.5 px-4 py-4 space-y-4">
            <div class="grid grid-cols-4 gap-2 text-sm">
                <button class="btn custom-button load-preset mx-2 border border-black dark:border-white hover:border-cyan-500 dark:hover:border-cyan-500 rounded-md" data-preset="1">Load 1</button>
                <button class="btn custom-button load-preset mx-2 border border-black dark:border-white hover:border-pink-500 dark:hover:border-pink-500 rounded-md" data-preset="2">Load 2</button>
                <button class="btn custom-button load-preset mx-2 border border-black dark:border-white hover:border-violet-500 dark:hover:border-violet-500 rounded-md" data-preset="3">Load 3</button>
                <button class="btn custom-button load-preset mx-2 border border-black dark:border-white hover:border-green-500 dark:hover:border-green-500 rounded-md" data-preset="4">Load 4</button>
                <button class="btn custom-button store-preset mx-2 border border-black dark:border-white hover:border-cyan-500 dark:hover:border-cyan-500 rounded-md" data-preset="1">Store 1</button>
                <button class="btn custom-button store-preset mx-2 border border-black dark:border-white hover:border-pink-500 dark:hover:border-pink-500 rounded-md" data-preset="2">Store 2</button>
                <button class="btn custom-button store-preset mx-2 border border-black dark:border-white hover:border-violet-500 dark:hover:border-violet-500 rounded-md" data-preset="3">Store 3</button>
                <button class="btn custom-button store-preset mx-2 border border-black dark:border-white hover:border-green-500 dark:hover:border-green-500 rounded-md" data-preset="4">Store 4</button>
            </div>
        </section>
        </details>

        <!-- White Balance allein -->
        <!-- body: bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans -->
        <details class="rounded-md overflow-hidden"
                 style="margin-top: 0px; margin-bottom: 8px;">
            <summary class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans cursor-pointer px-4 py-2 text-lg marker:text-blue-500 marker:text-xl"><span class="font-semibold mb-1.5">White Balance</span></summary>
        <section class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans my-1.5 px-4 py-4 space-y-4">
            <select class="wb-mode select mb-2 w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                <option value="0">Auto</option>
                <option value="1">Indoor</option>
                <option value="2">Outdoor</option>
                <option value="3">One Push WB</option>
                <option value="4">ATW</option>
                <option value="5">Manual</option>
                <option value="6">Sodium Lamp</option>
            </select>
            <button class="btn custom-button one-push-wb mt-2 px-3 py-1 text-sm border border-black dark:border-white hover:border-blue-500 dark:hover:border-blue-500 rounded-md" >One Push WB</button>
            <div class="mt-3">
                <span class="font-mono text-xs">Manual Red: </span><span class="value-manual-red font-mono text-s"> N.A.</span>
                <input type="range" min="0" max="128" step="1" class="wb-manual-red w-full">
            </div>
            <div class="mt-3">
                <span class="font-mono text-xs">Manual Blue: </span><span class="value-manual-blue font-mono text-s"> N.A.</span>
                <input type="range" min="0" max="128" step="1" class="wb-manual-blue w-full">
            </div>
        </section>
        </details>

        <!-- Bild -->
        <details class="rounded-md overflow-hidden"
                 style="margin-top: 10px; margin-bottom: 5px"> <!-- <details open> für open on default -->
            <summary class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans cursor-pointer px-4 py-2 text-lg marker:text-blue-500 marker:text-xl"><span class="font-semibold mb-1.5">Bild</span></summary>
        <section class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-0 font-sans my-1.5 px-4 py-4 space-y-4">
            <div class="mb-1">
                <span class="font-mono text-xs">Brightness: </span><span class="value-brightness font-mono text-s"> N.A.</span>
                <input type="range" min="0" max="14" step="1" class="picture-brightness w-full">
            </div>
            <div class="mb-1">
                <span class="font-mono text-xs">Saturation: </span><span class="value-saturation font-mono text-s"> N.A.</span>
                <input type="range" min="0" max="14" step="1" class="picture-saturation w-full">
            </div>
            <div>
                <span class="font-mono text-xs">Sharpness: </span><span class="value-sharpness font-mono text-s"> N.A.</span>
                <input type="range" min="0" max="14" step="1" class="picture-sharpness w-full">
            </div>
        </section>
        </details>



        <!-- Loader für die einzelnen UIs der Kamera -->
        <div class="local-loader hidden absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 rounded-xl">
            <div class="relative w-20 h-20">
                <div class="absolute inset-0 border-[6px] border-t-transparent border-white rounded-full animate-spin shadow-[0_0_30px_rgba(255,255,255,0.25)]"></div>
                <img src="./img/logo.svg" alt="Logo" class="absolute inset-0 m-auto w-8 h-8 object-contain drop-shadow-lg" />
            </div>
            <br><br><br>
            <p class="mt-8 text-white text-lg font-semibold tracking-wide animate-pulse">Preset wird geladen...</p>
        </div>
        <!-- Loader noch innerhalb der camera-ui -->

    </div>


</template>











<!-- style für selects
w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;
-->



<!-- Zusatz-Tailwind Klassen für Buttons und Dropdowns -->
<style>

    .btn {
        @apply border px-3 py-1 rounded-md transition-colors;
    }


    .select {
        @apply w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400;
        @apply bg-white text-black border-gray-300;

        /* Dark Mode Anpassung */
        @apply dark:bg-gray-700 dark:text-white dark:border-gray-500;

        background-color: theme('colors.gray.700') !important;



        /* Pfeil entfernen und selbst setzen */
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg fill='none' stroke='%23ccc' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Cpath d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1rem;
        padding-right: 2.5rem;
    }



    /*Keyframes für Lampen Animation*/
    @keyframes gentle-ping {
        0% {
            transform: scale(1);
            opacity: 0.8;
        }
        50% {
            transform: scale(1.5);
            opacity: 1; /* bleibt sichtbar */
        }
        100% {
            transform: scale(1);
            opacity: 0.8;
        }
    }
    .gentle-ping {
        animation: gentle-ping 2.5s ease-in-out infinite;
    }

</style>




<!-- style für selects
w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;
-->

<!-- Fancy Vollbild-Overlay Loader
<div id="global-loader" class="fixed inset-0 z-50 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center hidden gap-5">
    <div class="relative w-20 h-20">

        <div class="absolute inset-0 border-[6px] border-t-transparent border-white rounded-full animate-spin shadow-[0_0_30px_rgba(255,255,255,0.25)]"></div>

        <img src="./img/logo.svg" alt="Logo" class="absolute inset-0 m-auto w-10 h-10 object-contain drop-shadow-lg" />
    </div>
    <br><br><br>
    <p class="mt-8 text-white text-lg font-semibold tracking-wide animate-pulse">Preset wird geladen...</p>
</div>
-->




</body>



</html>
