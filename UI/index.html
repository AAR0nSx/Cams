<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Kamera-Steuerung</title>

    <!--VOR dem laden von tailwind wird der Darkmode abgefragt-->
    <script>
        const settings = JSON.parse(localStorage.getItem("electron-settings"));
        if (settings?.darkMode) {
            document.documentElement.classList.add("dark");
        }
    </script>

    <script src="./renderer.js" defer></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Dark Mode aktivieren -->
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>


    <script>
        //Settings Skript
        // Dark Mode Klasse schon beim initialen Laden setzen
        (async () => {
            const settings = JSON.parse(localStorage.getItem("electron-settings"));
            if (settings?.darkMode) {
                document.documentElement.classList.add("dark");
            }
        })();
    </script>


</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-6 font-sans">


<!-- Kamera Container, in den die UIs eingefügt werden, je nachdem wie viele es sein sollen -->
<div id="camera-container" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>


<!-- Alles ist das Template -->
<template id="camera-template">
    <div class="camera-ui space-y-6 bg-white dark:bg-gray-800 text-black dark:text-white rounded-xl p-6 shadow">
        <h2 class="text-xl font-semibold camera-label">Kamera</h2>

        <!-- Bewegung -->
        <section>
            <h3 class="font-semibold mb-2">Bewegung</h3>
            <div class="grid grid-cols-3 gap-2 w-48 mx-auto">
                <button class="direction-button btn" data-direction="up_left">↖︎</button>
                <button class="direction-button btn" data-direction="up">↑</button>
                <button class="direction-button btn" data-direction="up_right">↗︎</button>
                <button class="direction-button btn" data-direction="left">←</button>
                <button class="direction-button btn" data-direction="stop">⏹</button>
                <button class="direction-button btn" data-direction="right">→</button>
                <button class="direction-button btn" data-direction="down_left">↙︎</button>
                <button class="direction-button btn" data-direction="down">↓</button>
                <button class="direction-button btn" data-direction="down_right">↘︎</button>
            </div>
        </section>

        <!-- Zoom -->
        <section>
            <h3 class="font-semibold mb-2">Zoom</h3>
            <div class="flex items-center gap-4 justify-center">
                <button class="btn zoom-out">-</button>
                <span class="zoom-level text-lg font-mono">0.0x</span>
                <button class="btn zoom-in">+</button>
                <input type="range" min="0" max="36" step="0.2" class="zoom-slider w-64">
            </div>
        </section>

        <!-- Fokus -->
        <section>
            <h3 class="font-semibold mb-2">Fokus</h3>
            <select class="focus-mode select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                <option value="0">Manual</option>
                <option value="1">Auto</option>
            </select>
            <div class="mt-2">
                Focus Range: <span class="value-focus-range font-mono"></span>
                <input type="range" min="0" max="2409" step="1" class="focus-range w-full">
            </div>
        </section>

        <!-- White Balance -->
        <section>
            <h3 class="font-semibold mb-2">White Balance</h3>
            <select class="wb-mode select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                <option value="0">Auto</option>
                <option value="1">Indoor</option>
                <option value="2">Outdoor</option>
                <option value="3">One Push WB</option>
                <option value="4">ATW</option>
                <option value="5">Manual</option>
                <option value="6">Sodium Lamp</option>
            </select>
            <button class="btn one-push-wb mt-2">One Push WB</button>
            <div class="mt-2">
                Manual Red: <span class="value-manual-red font-mono"></span>
                <input type="range" min="0" max="128" step="1" class="wb-manual-red w-full">
            </div>
            <div class="mt-2">
                Manual Blue: <span class="value-manual-blue font-mono"></span>
                <input type="range" min="0" max="128" step="1" class="wb-manual-blue w-full">
            </div>
        </section>

        <!-- Picture -->
        <section>
            <h3 class="font-semibold mb-2">Picture Settings</h3>
            <div>
                Brightness: <span class="value-brightness font-mono"></span>
                <input type="range" min="0" max="15" step="1" class="picture-brightness w-full">
            </div>
            <div>
                Saturation: <span class="value-saturation font-mono"></span>
                <input type="range" min="0" max="15" step="1" class="picture-saturation w-full">
            </div>
            <div>
                Sharpness: <span class="value-sharpness font-mono"></span>
                <input type="range" min="0" max="14" step="1" class="picture-sharpness w-full">
            </div>
        </section>

        <!-- Belichtung -->
        <section>
            <h3 class="font-semibold mb-2">Belichtung</h3>
            <label>
                Modus:
                <select class="exposure-mode select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">Full Auto</option>
                    <option value="3">Manuell</option>
                    <option value="1">Shutter Priority</option>
                    <option value="2">Iris Priority</option>
                </select>
            </label>
            <label>
                Shutter:
                <select class="shutter select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">1/10000</option>
                    <option value="1">1/5000</option>
                    <option value="2">1/3000</option>
                    <option value="3">1/2500</option>
                    <option value="4">1/2000</option>
                    <option value="5">1/1500</option>
                    <option value="6">1/1000</option>
                    <option value="7">1/725</option>
                    <option value="8">1/500</option>
                    <option value="9">1/350</option>
                    <option value="10">1/250</option>
                    <option value="11">1/180</option>
                    <option value="12">1/120</option>
                    <option value="13">1/100</option>
                    <option value="14">1/90</option>
                    <option value="15">1/60</option>
                    <option value="16">1/30</option>
                    <option value="17">1/15</option>
                    <option value="18">1/8</option>
                    <option value="19">1/4</option>
                    <option value="20">1/2</option>
                    <option value="21">1/1</option>
                </select>
            </label>
            <label>
                Gain:
                <select class="gain select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">0dB</option>
                    <option value="1">3dB</option>
                    <option value="2">6dB</option>
                    <option value="3">9dB</option>
                    <option value="4">12dB</option>
                    <option value="5">15dB</option>
                    <option value="6">18dB</option>
                    <option value="7">21dB</option>
                    <option value="8">24dB</option>
                    <option value="9">27dB</option>
                    <option value="10">30dB</option>
                    <option value="11">33dB</option>
                    <option value="12">36dB</option>
                    <option value="13">39dB</option>
                    <option value="14">42dB</option>
                    <option value="15">45dB</option>
                </select>
            </label>
            <label>
                Gamma:
                <select class="gamma select w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </label>
        </section>

        <section class="bg-white dark:bg-gray-800 text-black dark:text-white rounded-xl p-6 shadow">
            <h2 class="text-xl font-semibold mb-4">Presets</h2>
            <div class="grid grid-cols-2 gap-4 max-w-md">
                <label class="block">
                    <button class="btn load-preset" data-preset="1">Load 1</button>
                    <button class="btn load-preset" data-preset="2">Load 2</button>
                    <button class="btn load-preset" data-preset="3">Load 3</button>
                    <button class="btn load-preset" data-preset="4">Load 4</button>
                    <br><br>
                    <button class="btn store-preset" data-preset="1">Save 1</button>
                    <button class="btn store-preset" data-preset="2">Save 2</button>
                    <button class="btn store-preset" data-preset="3">Save 3</button>
                    <button class="btn store-preset" data-preset="4">Save 4</button>
                </label>
            </div>
        </section>


    </div> <!-- div Camera UI  (template erlaubt nur einen Wurzelknoten!!)-->

</template>


<div class="text-center mt-4">
    <button class="btn" onclick="window.electronAPI.openSettings()">⚙️ Einstellungen</button>
</div>








<!-- style für selects
w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-500 appearance-none" style="background-image: url('data:image/svg+xml,%3Csvg fill=\'none\' stroke=\'%23ccc\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M19 9l-7 7-7-7\'%3E%3C/path%3E%3C/svg%3E'); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2.5rem;
-->



<!-- Zusatz-Tailwind Klassen für Buttons und Dropdowns -->
<style>

    .btn {
        @apply bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700 text-xl transition dark:bg-gray-300 dark:text-black dark:hover:bg-gray-200;
    }

    .select {
        @apply w-full px-3 py-2 rounded border text-sm shadow focus:outline-none focus:ring-2 focus:ring-blue-400;
        @apply bg-white text-black border-gray-300;

        /* Dark Mode Anpassung */
        @apply dark:bg-gray-700 dark:text-white dark:border-gray-500;

        background-color: theme('colors.gray.700') !important;



        /* Pfeil entfernen und selbst setzen */
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg fill='none' stroke='%23ccc' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Cpath d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1rem;
        padding-right: 2.5rem;
    }


</style>

</body>
</html>
